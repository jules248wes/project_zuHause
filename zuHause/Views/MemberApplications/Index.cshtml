@using zuHause.ViewModels.MemberViewModel
@model List<ApplicationRecordViewModel>
@{
    ViewData["activePage"] = "MemberApplications";
}

<div class="row w-100 gx-5 justify-content-center position-relative h-100">
    @await Html.PartialAsync("_PartialMemberSideBar")
    <div class="col-10 d-flex justify-content-start flex-column
        align-items-center">
        <div class="row w-100">
            <h1 class="fs-3 text-white px-0">申請紀錄管理</h1>
            <hr />
            <div class="col-12 mt-3 px-0">
                <ul class="d-flex gap-3 align-items-center p-0">
                    <li><a class="btn @(ViewBag.type == "ALL" ? "btn-primary" : "btn-light")" href="@Url.Action("Index", "MemberApplications", new { type = "ALL" })">全部</a></li>
                    <li><a class="btn @(ViewBag.type == "RENTAL" ? "btn-primary" : "btn-light")" href="@Url.Action("Index", "MemberApplications", new { type = "RENTAL" })">申請看房</a></li>
                    <li><a class="btn @(ViewBag.type == "HOUSE_VIEWING" ? "btn-primary" : "btn-light")" href="@Url.Action("Index", "MemberApplications", new { type = "HOUSE_VIEWING" })">申請租賃</a></li>
                </ul>
            </div>
        </div>
        <div class="row w-100">
            <div class="row px-0 w-100 mx-0 mb-3 align-items-center justify-content-end">
                <div class="col-auto px-0">
                    <select class="form-select" id="statusFilter" name="statusFilter">
                        <option value="">申請狀態</option>
                        @if (ViewBag.ApplicationStatusOptions is Dictionary<string, string> statusDict)
                        {
                            foreach (var status in statusDict)
                            {
                                <option value="@status.Key">@status.Value</option>
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="row px-0 w-100 mx-0 gap-3">
                @foreach (ApplicationRecordViewModel item in Model)
                {
                    @await Component.InvokeAsync("MemberApplicationCard",new MemberApplicationCardInputViewModel
                    {
                        Record = item,
                                StatusCodeDict = ViewBag.ApplicationStatusOptions as Dictionary<string, string> ?? new()
                                })
                                }
            </div>

        </div>
    </div>




</div>

@section Scripts {
    <script src="~/js/changeMemberContractCard.js"></script>
    <script src="~/js/signatureVerify.js"></script>

}