@* Views/Shared/_NavigationBar.cshtml *@
@{
    var categories = ViewBag.categories as List<zuHause.Models.FurnitureCategory>;
    // 使用統一的 Cookie 認證機制
    var isAuthenticated = User.Identity?.IsAuthenticated == true;
    var memberName = isAuthenticated ? User.FindFirst(System.Security.Claims.ClaimTypes.Name)?.Value : null;
    var displayName = !string.IsNullOrEmpty(memberName) ? $"{memberName}，歡迎使用" : "訪客";
}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - 家具租借</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/furniture.css" />
    <link rel="icon" href="~/img/icon.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm">
            <div class="container-fluid">
                <a class="navbar-brand" href="@Url.Action("FurnitureHomePage", "Furniture")">
                    <img src="~/img/zuHauselogo.png" alt="Logo" height="40" />
                </a>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("FrontPage", "Tenant")">租屋首頁</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("FurnitureHomePage", "Furniture")">家具首頁</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("InstructionsForUse", "Furniture")">租借說明</a></li>
                </ul>
                <div class="d-flex align-items-center">
                    @if (isAuthenticated)
                    {
                        <a href="@Url.Action("OrderHistory", "Furniture")" class="text-decoration-none text-dark d-flex align-items-center">
                            <i class="bi bi-person-fill text-purple me-1"></i> @* 確保有 Bootstrap Icons *@
                            <span class="me-3">@displayName</span>
                        </a>
                        <form asp-controller="Member" asp-action="Logout" method="post" class="d-inline">
                            <button type="submit" class="btn btn-outline-secondary btn-sm me-2">登出</button>
                        </form>
                        <a href="@Url.Action("RentalCart", "Furniture")" class="btn btn-outline-primary btn-sm">購物車</a>
                    }
                    else
                    {
                        <a href="@Url.Action("Login", "Member", new { ReturnUrl = Context.Request.Path })" class="text-decoration-none text-dark d-flex align-items-center">
                            <i class="bi bi-person-fill text-muted me-1"></i>
                            <span class="me-3">訪客</span>
                        </a>
                        <a href="@Url.Action("Login", "Member", new { ReturnUrl = Context.Request.Path })" class="btn btn-outline-secondary btn-sm me-2">登入</a>
                        <a href="@Url.Action("RegisterVerifyPhone", "Member", new { ReturnUrl = Context.Request.Path })" class="btn btn-outline-primary btn-sm">註冊</a>
                    }
                </div>

            </div>
        </nav>
    </header>

    <main class="container-fluid mt-3">
        @RenderBody()
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>

<style>
    
    .navbar {
        background-color: #c5eee5 !important; /* 淺綠導覽列 */
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        height: 77px;
    }

        .navbar .nav-link,
        .navbar .navbar-brand,
        .navbar span {
            color: #006b5e !important; /* 深綠文字，對比淺綠底 */
            font-weight: 500;
        }

    main {
        padding: 0;
    }

    .navbar-brand img {
        height: 65px; /*  與租屋平台一致的高度，視情況再微調 */
        width: auto;
        margin-top: -5px; 

</style>
