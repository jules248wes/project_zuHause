@model dynamic

@{
    var tabId = ViewData["TabId"] as string ?? "all";
    var tableType = ViewData["TableType"] as string ?? "all";
    var checkboxClass = ViewData["CheckboxClass"] as string ?? "user-checkbox";
    var bulkBtnId = ViewData["BulkBtnId"] as string ?? "bulkMessageBtn";
    var selectAllId = ViewData["SelectAllId"] as string ?? "selectAllUsers";
    var tableTitle = ViewData["TableTitle"] as string ?? "會員列表";
    var paginationLabel = ViewData["PaginationLabel"] as string ?? "會員分頁";
    var users = ViewData["Users"] as IEnumerable<MemberData> ?? new List<MemberData>();
}

<div class="card mt-3">
    <div class="card-body">
        <div class="mb-3">
            <button type="button" class="btn btn-success me-2" id="@bulkBtnId" disabled>
                <i class="fas fa-envelope"></i> 批量傳送系統訊息
            </button>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th style="width: 50px;">
                            <input type="checkbox" class="form-check-input" id="@selectAllId">
                        </th>
                        <th>會員ID</th>
                        <th>會員基本資料</th>
                        <th class="sortable" data-sort="registerDate" data-table="@tableType">
                            註冊日期 
                            @if (tableType == "all")
                            {
                                <i class="bi bi-sort-down sort-icon active" data-direction="desc"></i>
                            }
                            else
                            {
                                <i class="bi bi-sort-up-alt sort-icon" data-direction="none"></i>
                            }
                        </th>
                        @if (tableType == "pending" || tableType == "landlord")
                        {
                            <th class="sortable" data-sort="lastLogin" data-table="@tableType">
                                上次登入時間 
                                <i class="bi bi-sort-up-alt sort-icon" data-direction="none"></i>
                            </th>
                            <th class="sortable" data-sort="verificationTime" data-table="@tableType">
                                申請驗證時間 
                                <i class="bi bi-sort-up-alt sort-icon active" data-direction="asc"></i>
                            </th>
                            <th>身分證上傳</th>
                        }
                        else
                        {
                            <th class="sortable" data-sort="lastLogin" data-table="@tableType">
                                上次登入時間 
                                <i class="bi bi-sort-up-alt sort-icon" data-direction="none"></i>
                            </th>
                            <th>身分驗證狀態</th>
                            <th>是否房東</th>
                        }
                        <th>帳號狀態</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    @if (tableType == "all")
                    {
                        <!-- 全部會員數據 -->
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U001"></td>
                            <td>U001</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">王大明</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0912-345-678</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">wang.daming@email.com</a></small></div>
                            </td>
                            <td>2024-01-15</td>
                            <td>2024-07-09 14:30</td>
                            <td><span class="badge bg-success">已驗證</span></td>
                            <td><span class="badge bg-info">是</span></td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">查看</button>
                                <button class="btn btn-sm btn-outline-secondary">編輯</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U002"></td>
                            <td>U002</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">李小華</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0987-654-321</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">li.xiaohua@email.com</a></small></div>
                            </td>
                            <td>2024-01-20</td>
                            <td>2024-07-08 09:15</td>
                            <td><span class="badge bg-warning">等待驗證</span></td>
                            <td><span class="badge bg-secondary">否</span></td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">查看</button>
                                <button class="btn btn-sm btn-outline-secondary">編輯</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U003"></td>
                            <td>U003</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">張美玲</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0966-123-456</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">zhang.meiling@email.com</a></small></div>
                            </td>
                            <td>2024-02-01</td>
                            <td>2024-07-10 08:45</td>
                            <td><span class="badge bg-success">已驗證</span></td>
                            <td><span class="badge bg-info">是</span></td>
                            <td><span class="badge bg-warning">暫時停權</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">查看</button>
                                <button class="btn btn-sm btn-outline-secondary">編輯</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U004"></td>
                            <td>U004</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">陳志偉</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0955-789-012</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">chen.zhiwei@email.com</a></small></div>
                            </td>
                            <td>2024-02-10</td>
                            <td>2024-07-05 16:22</td>
                            <td><span class="badge bg-warning">等待驗證</span></td>
                            <td><span class="badge bg-secondary">否</span></td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">查看</button>
                                <button class="btn btn-sm btn-outline-secondary">編輯</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U005"></td>
                            <td>U005</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">林雅婷</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0933-456-789</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">lin.yating@email.com</a></small></div>
                            </td>
                            <td>2024-02-15</td>
                            <td>2024-07-10 11:18</td>
                            <td><span class="badge bg-success">已驗證</span></td>
                            <td><span class="badge bg-secondary">否</span></td>
                            <td><span class="badge bg-danger">永久停用</span></td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">查看</button>
                                <button class="btn btn-sm btn-outline-secondary">編輯</button>
                            </td>
                        </tr>
                    }
                    else if (tableType == "pending")
                    {
                        <!-- 等待驗證會員數據 -->
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U002"></td>
                            <td>U002</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">李小華</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0987-654-321</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">li.xiaohua@email.com</a></small></div>
                            </td>
                            <td>2024-01-20</td>
                            <td>2024-07-08 09:15</td>
                            <td>2024-07-08 10:30</td>
                            <td>
                                <span class="badge bg-info">已上傳</span><br>
                                <button class="btn btn-sm btn-outline-primary mt-1" data-bs-toggle="modal" data-bs-target="#viewDocumentModal">查看證件</button>
                            </td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#verificationModal">進行驗證操作</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U006"></td>
                            <td>U006</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">黃建國</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0944-567-890</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">huang.jianguo@email.com</a></small></div>
                            </td>
                            <td>2024-02-18</td>
                            <td>2024-07-07 12:30</td>
                            <td>2024-07-07 13:15</td>
                            <td>
                                <span class="badge bg-info">已上傳</span><br>
                                <button class="btn btn-sm btn-outline-primary mt-1" data-bs-toggle="modal" data-bs-target="#viewDocumentModal">查看證件</button>
                            </td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#verificationModal">進行驗證操作</button>
                            </td>
                        </tr>
                    }
                    else if (tableType == "landlord")
                    {
                        <!-- 申請房東會員數據 -->
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U007"></td>
                            <td>U007</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">劉志明</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0922-111-222</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">liu.zhiming@email.com</a></small></div>
                            </td>
                            <td>2024-03-01</td>
                            <td>2024-07-09 18:20</td>
                            <td>2024-07-10 09:30</td>
                            <td>
                                <span class="badge bg-info">已上傳</span><br>
                                <button class="btn btn-sm btn-outline-primary mt-1" data-bs-toggle="modal" data-bs-target="#viewDocumentModal">查看證件</button>
                            </td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#landlordVerificationModal">進行驗證操作</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input @checkboxClass" value="U009"></td>
                            <td>U009</td>
                            <td>
                                <div><a href="#" target="_blank" class="text-decoration-none">謝文豪</a></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">0955-666-777</a></small></div>
                                <div><small class="text-muted"><a href="#" target="_blank" class="text-decoration-none text-muted">xie.wenhao@email.com</a></small></div>
                            </td>
                            <td>2024-03-15</td>
                            <td>2024-07-10 22:45</td>
                            <td>2024-07-11 14:20</td>
                            <td>
                                <span class="badge bg-info">已上傳</span><br>
                                <button class="btn btn-sm btn-outline-primary mt-1" data-bs-toggle="modal" data-bs-target="#viewDocumentModal">查看證件</button>
                            </td>
                            <td><span class="badge bg-success">啟用中</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#landlordVerificationModal">進行驗證操作</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        
        <nav aria-label="@paginationLabel">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1">上一頁</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                @if (tableType != "landlord")
                {
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                }
                <li class="page-item">
                    <a class="page-link" href="#">下一頁</a>
                </li>
            </ul>
        </nav>
    </div>
</div>