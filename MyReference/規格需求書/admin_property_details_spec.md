# 後台管理 - 個別屋源詳情頁規劃書

## 1. 總體目標與設計原則

本頁面的核心目標是為管理員提供一個以「審核與管理」為中心的屋源儀表板，使其能夠全面、高效地查閱屋源的所有相關資訊，並執行審核、狀態變更等管理操作。

設計需遵循以下原則：

-   **任務導向**: 將最重要的資訊和操作放在預設頁籤，簡化管理員的工作流程。
-   **資訊聚合與分離**: 在單一頁面中聚合所有資訊，同時透過頁籤將不同性質的內容清晰地分離，避免資訊過載。
-   **符合現有規範**: 頁面設計應遵循 `Notes on Development Requirements.md` 中定義的設計原則與互動規範。

---

## 2. 頁面佈局

採用頂部頁籤式佈局，結構如下：

1.  **頂部標題區**: 顯示屋源標題、ID、關鍵狀態標籤，以及最高頻的管理操作按鈕。
2.  **主頁籤導航區**: 頁面的核心導航，用於在不同資訊模組間切換。
3.  **頁籤內容顯示區**: 根據當前選擇的頁籤，顯示對應的內容。

---

## 3. 頂部標題區

### 3.1 標題資訊

-   **屋源標題**: `properties.title`
-   **屋源ID**: `properties.propertyID`
-   **所屬房東**: `members.memberName`，並提供一個可點擊連結至該會員的詳情頁。
-   **狀態標籤 (Badges)**:
    -   **審核狀態**: 例如「待審核」、「審核通過」、「審核失敗」、「強制下架」 (來自 `properties.statusCode`)。
    -   **刊登狀態**: 例如「已上架」、「未上架」、「已過期」 (根據 `properties.isPaid` 和 `properties.expireAt` 計算得出)。

### 3.2 快速操作按鈕

-   **`強制下架`**: 僅在屋源為「已上架」狀態時顯示。操作需彈出 Modal 進行二次確認，並可填寫下架原因。
-   **`編輯屋源`**: (<i class="bi bi-pencil-square"></i>) 點擊後進入屋源資料的編輯模式。
-   **`查看前台頁面`**: 提供一個連結，在新分頁中開啟該屋源在前台的實際顯示頁面。

---

## 4. 頁面核心：頁籤式內容模組

### 4.1 `主要資訊` (預設頁籤)

此頁籤聚合了管理員最常需要查閱和操作的資訊。

-   **左欄**:
    -   **卡片：屋源詳細資料**: 包含地址、租金、格局、描述等。
    -   **卡片：刊登資訊**: 包含刊登方案、費用、天數、日期等。
-   **右欄**:
    -   **卡片：審核與狀態管理 (核心功能)**: 包含查看產權證明、通過審核、駁回申請、手動標記付款等核心操作按鈕。
    

### 4.2 `照片與設備`

此頁籤聚合了視覺化和列表式的附加資訊。

-   **卡片：屋源照片**
    -   **形式**: 圖片網格 (Image Grid)。以縮圖形式展示所有上傳的照片，方便管理員快速預覽。
    -   **資料來源**: `propertyImages` 表。
-   **卡片：設備與費用**
    -   **形式**: Key-Value 列表或標籤組。
    -   **顯示欄位**: 設備清單 (`propertyEquipmentRelations`) 和費用說明。

### 4.3 `歷史租約`

-   **形式**: 列表 (Table)。
-   **資料來源**: `contracts` 表。
-   **列表欄位**: 合約ID, 租客姓名, 租期起訖, 合約狀態。

### 4.4 `收到的檢舉`

-   **提示**: 若此屋源存在未處理的檢舉，此頁籤應有醒目的視覺提示（如紅點或數字徽章）。
-   **形式**: 列表 (Table)。
-   **資料來源**: `propertyComplaints` 表。
-   **列表欄位**: 投訴單號, 投訴人, 投訴內容摘要, 投訴時間, 處理狀態。

### 4.5 `審核記錄`

-   **形式**: 列表 (Table)。
-   **資料來源**: `approvalItems` 表。
-   **功能**: 完整追溯此屋源的所有審核歷史。
-   **列表欄位**: 操作時間, 操作類型, 操作管理員, 備註/原因。