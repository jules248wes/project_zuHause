# 後台管理 - 會員個人詳情頁規劃書

## 1. 總體目標與設計原則

本頁面的核心目標是為管理員提供一個「用戶360度視圖儀表板」，使其能夠全面、高效地查閱會員的所有相關資訊並執行管理操作。

設計需遵循以下原則：
- **資訊聚合**: 在單一頁面中聚合所有與該會員相關的資料，減少管理員在不同頁面間跳轉的頻率。
- **情境分離**: 透過頁籤 (Tabs) 將不同業務情境（如租客、房東、訂單等）的活動清晰地分開，讓管理員能專注於當前任務。
- **符合現有規範**: 頁面設計應遵循 `Notes on Development Requirements.md` 中定義的「直覺式設計」、「內容導向」和「一目了然的操作方式」等原則。

---

## 2. 頁面佈局

採用頁籤式卡片佈局，結構如下：

1.  **頂部標題區 (Header)**: 顯示會員最關鍵的摘要資訊。
2.  **快速操作區 (Quick Actions)**: 緊鄰標題區，放置最常用的管理按鈕。
3.  **頁籤導航區 (Tab Navigation)**: 頁面核心，用於切換不同的資訊上下文。
4.  **內容顯示區 (Content Area)**: 根據當前選擇的頁籤，顯示對應的資訊卡片 (Cards)。

---

## 3. 頁面頂部：摘要與快速操作

### 3.1 左側資訊

-   **會員姓名**: `members.memberName`
-   **會員ID**: `members.memberID`
-   **註冊時間**: `members.createdAt`

### 3.2 右側狀態標籤 (Badges)

以標籤形式清晰展示會員的關鍵狀態：

-   **帳號狀態**: 顯示「啟用」或「停用」 (根據 `members.isActive`)。
-   **身份認證**: 顯示「身分已驗證」或「未驗證」 (根據 `members.identityVerifiedAt` 是否為 NULL)。
-   **房東身份**: 顯示「是房東」或「否」 (根據 `members.isLandlord`)。

### 3.3 快速操作按鈕

提供一組醒目的按鈕，用於執行最高頻的管理操作：

-   **`停用帳號` / `啟用帳號`**: 根據 `members.isActive` 狀態顯示其一。操作需彈出 Modal 進行二次確認。
-   **`發送系統訊息`**: 點擊後跳轉或彈出用於發送一對一系統訊息的介面。
-   **`重設密碼`**: 觸發重設密碼流程。

---

## 4. 頁面核心：頁籤式內容模組

### 4.1 `基本資料` (預設頁籤)

#### 卡片：個人檔案

-   **顯示欄位**:
    -   姓名 (`members.memberName`)
    -   性別 (`members.gender`)
    -   生日 (`members.birthDate`)
    -   手機號碼 (`members.phoneNumber`)
    -   電子信箱 (`members.email`)
    -   居住地區 (由 `members.residenceCityID` 和 `members.residenceDistrictID` 關聯取得)
    -   詳細地址 (`members.addressLine`)
-   **互動功能**:
    -   提供「編輯」按鈕 (<i class="bi bi-pencil-square"></i>)，點擊後可修改上述資料。

#### 卡片：認證狀態與管理

-   **顯示欄位**:
    -   手機驗證時間 (`members.phoneVerifiedAt`)
    -   Email 驗證時間 (`members.emailVerifiedAt`)
    -   身分驗證時間 (`members.identityVerifiedAt`)
-   **互動功能**:
    -   **`手動驗證身分`**: 此為核心功能按鈕。僅在 `members.identityVerifiedAt` 為 NULL 時顯示。
        -   點擊此按鈕，必須彈出一個符合 `Notes on Development Requirements.md` 規範的 Bootstrap Modal (設定 `backdrop: 'static'` 和 `keyboard: 'false'`)。
        -   Modal 中包含一個用於輸入身分證字號的欄位。
        -   點擊 Modal 中的「確定」按鈕後，需有二次確認機制。
        -   最終確認後，系統更新 `members.identityVerifiedAt` 為當前時間，並將 `members.isLandlord` 設為 `true`。

### 4.2 `租客活動`

#### 卡片：歷史租約

-   **形式**: 列表 (Table)。
-   **資料來源**: `contracts` 表，篩選該會員為租客的紀錄。
-   **列表欄位**: 合約ID, 房源標題, 房東姓名, 租期起訖, 合約狀態。
-   **互動**: 列表中的每一行都應可點擊，並跳轉至對應的「合約詳情頁」。

### 4.3 `房東活動`

#### 卡片：名下房源

-   **形式**: 列表 (Table)。
-   **資料來源**: `properties` 表，篩選 `landlordMemberID` 為該會員的紀錄。
-   **列表欄位**: 房源ID, 房源標題, 地址, 屋源狀態, 刊登到期日。
-   **互動**: 列表中的每一行都應可點擊，並跳轉至對應的「屋源詳情頁」。

#### 卡片：收到的檢舉

-   **形式**: 列表 (Table)。
-   **資料來源**: `propertyComplaints` 表，關聯其名下所有房源。
-   **列表欄位**: 投訴單號, 投訴內容摘要, 投訴時間, 處理狀態。
-   **互動**: 列表中的每一行都應可點擊，並跳轉至對應的「投訴詳情頁」。

### 4.4 `訂單記錄`

#### 卡片：歷史傢俱訂單

-   **形式**: 列表 (Table)。
-   **資料來源**: `furnitureOrders` 表。
-   **列表欄位**: 訂單ID, 訂單總金額, 訂單狀態, 付款狀態, 下單時間。
-   **互動**: 列表中的每一行都應可點擊，並跳轉至對應的「傢俱訂單詳情頁」。

### 4.5 `溝通與支援`

#### 卡片：客服記錄

-   **形式**: 列表 (Table)。
-   **資料來源**: `customerServiceTickets` 表。
-   **列表欄位**: 客服單號, 主旨, 關聯項目 (如租約ID或訂單ID), 狀態, 最後回覆時間。
-   **互動**: 列表中的每一行都應可點擊，並跳轉至對應的「客服單詳情頁」。


